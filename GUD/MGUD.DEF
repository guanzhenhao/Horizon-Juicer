;修整主参数
DEF NCK INT DRESSWARE;修整器选择(0VW/1XZ/2滚压/3液压)
DEF NCK REAL ROLLING_VER;滚压轮齿高
DEF NCK REAL WHEEL_DWHEEL_INTER;两轮中心距
DEF NCK INT DWHEEL_MODE;修整轮类型(0单/1双/2方)
DEF NCK INT DSHAPE;齿形选择(0三角/1梯形/2双圆弧)
DEF NCK BOOL WHEEL_STA;砂轮状态(0新/1旧)
DEF NCK BOOL DRESS_ALARM;修整报警(0无报警)
DEF NCK STRING[1] AXIS_VER;垂直轴
DEF NCK STRING[1] AXIS_HORI;水平轴
DEF NCK REAL DRESS_CUMU;修整累积
DEF NCK REAL DRESS_FEED;当前速度
DEF NCK INT DRESS_TIME_R;粗修次数
DEF NCK INT DRESS_TIME_F;精修次数
DEF NCK INT DRESS_TIME_ADD;新砂轮初始余量对应修整次数
DEF NCK REAL DRESS_DEEP_R;粗修进给
DEF NCK REAL DRESS_DEEP_F;精修进给
DEF NCK REAL DRESS_FEED_R;粗修速度
DEF NCK REAL DRESS_FEED_F;精修速度
DEF NCK INT DRESS_TIME_RCURNT;当前粗修次数
DEF NCK INT DRESS_TIME_FCURNT;当前精修次数
DEF NCK INT DRESS_TIME_ACURNT;当前新砂轮抬刀需要修整次数
DEF NCK REAL WHEEL_MID;修整轮与砂轮中心位置水平坐标
DEF NCK REAL WHEEL_WIDTH;砂轮宽
DEF NCK REAL WHEEL_DIA;砂轮直径
DEF NCK REAL WHEEL_DIACURNT;砂轮当前直径

DEF NCK INT D_DRESS_TIME_R;纯修整粗修次数
DEF NCK INT D_DRESS_TIME_F;纯修整精修次数
DEF NCK REAL D_DRESS_DEEP_R;纯修整粗修进给
DEF NCK REAL D_DRESS_DEEP_F;纯修整精修进给
DEF NCK REAL D_DRESS_FEED_R;纯修整粗修速度
DEF NCK REAL D_DRESS_FEED_F;纯修整精修速度

DEF NCK REAL DWHEEL_RND_L;齿形相对修整轮左圆弧半径
DEF NCK REAL DWHEEL_RND_R;齿形相对修整轮右圆弧半径
DEF NCK REAL DWHEEL_MID_L;左修整轮对砂轮中心
DEF NCK REAL DWHEEL_MID_R;右修整轮对砂轮中心

;初始化参数
DEF NCK BOOL ROTATION;螺纹旋向(0右旋/1左旋)
DEF NCK REAL L_POS;工件磨削左端坐标
DEF NCK REAL R_POS;工件磨削右端坐标
DEF NCK REAL LENGTH;磨削长度
DEF NCK REAL SCREW_PITCH;螺距
DEF NCK REAL SCREW_LEAD;导程
DEF NCK REAL START_POS;磨削起点
DEF NCK REAL END_POS;磨削终点
DEF NCK REAL MIDDLE_Z;磨削中点
DEF NCK REAL TOTAL_ANGLE;磨削总角度
DEF NCK REAL QUIT_X;头数切换退刀时的X值

;对刀
DEF NCK REAL RANDOM_POS;初始对刀点Z轴坐标
DEF NCK REAL FINAL_Z;对刀完成后Z轴坐标
DEF NCK REAL DRF_Z;对刀完成时手轮偏置值
DEF NCK REAL TOOL_SET_X;完成对刀时砂轮X轴坐标
DEF NCK REAL START_C;计算出的C轴起始角度
DEF NCK REAL START_POS_C;C轴初始角度
DEF NCK REAL PRESENT_C;探头接触工件时C角度
DEF NCK BOOL OPERA_METHOD;对刀方式(0手动/1自动）
DEF NCK BOOL OPERA_MODEL;对刀类型(0首次/1二次)
DEF NCK REAL MEASUER_R;测头半径
DEF NCK REAL WHL_HEAD;测头与砂轮距离
DEF NCK REAL TOUCH_X;探头接触工件表面时X坐标(自动对刀参数)
DEF NCK REAL WHEEL_TOUCH_X;砂轮接触工件表面时X坐标(自动对刀参数)
DEF NCK REAL PRESENT_X;探头接触工件时X坐标
DEF NCK REAL PRESENT_LZ;探头接触工件槽左侧时Z坐标
DEF NCK REAL PRESENT_RZ;探头接触工件槽右侧时Z坐标
DEF NCK REAL ANG_L;左齿形角
DEF NCK REAL ANG_R;右齿形角
DEF NCK REAL WORK_DEPTH_INIT;工件初开深度
DEF NCK INT TOOL_SET_POS;(0中点对刀/1起点对刀/2任意)

;滚轮参数
DEF NCK REAL DWHEEL_DIA;修整轮直径
DEF NCK REAL DWHEEL_LINESPEED;修整轮线速度
DEF NCK REAL DWHEEL_D_INTER;双滚轮间距
DEF NCK REAL DWHEEL_W_WIDTH;方滚轮厚度
DEF NCK REAL DWHEEL_S_RND_L;单滚轮左圆弧半径
DEF NCK REAL DWHEEL_S_RND_R;单滚轮右圆弧半径
DEF NCK REAL DWHEEL_D_RND_L;双滚轮左圆弧半径
DEF NCK REAL DWHEEL_D_RND_R;双滚轮右圆弧半径
DEF NCK REAL DWHEEL_W_RND_L;方滚轮左圆弧半径
DEF NCK REAL DWHEEL_W_RND_R;方滚轮右圆弧半径
DEF NCK REAL DRESS_VER_INIT_L;当前左端接触位置
DEF NCK REAL DRESS_VER_INIT_R;当前右端接触位置
DEF NCK REAL DWHEEL_TOUCH_L;初始左端接触位置
DEF NCK REAL DWHEEL_TOUCH_R;初始右端接触位置
DEF NCK REAL ROLLING_TOUCH;滚压轮接触位置
DEF NCK REAL DWHEEL_VER_DISTANCE;双滚轮垂直误差

;三角齿形
DEF NCK REAL TRIANGLE_VER    ;齿高
DEF NCK REAL TRIANGLE_ANG_LINIT  ;左角
DEF NCK REAL TRIANGLE_ANG_RINIT  ;右角
DEF NCK REAL TRIANGLE_RND_L  ;左半圆
DEF NCK REAL TRIANGLE_RND_R  ;右半圆
DEF NCK REAL TRIANGLE_RND_TL  ;过渡左圆弧半径
DEF NCK REAL TRIANGLE_RND_TR  ;过渡右圆弧半径
DEF NCK REAL TRIANGLE_ANG_LADD  ;调整左角
DEF NCK REAL TRIANGLE_ANG_RADD  ;调整右角
DEF NCK REAL TRIANGLE_ANG_L  ;当前左角
DEF NCK REAL TRIANGLE_ANG_R  ;当前右角

;梯形
DEF NCK REAL TRAP_VER    ;齿高
DEF NCK REAL TRAP_VER_BOTM    ;齿根高度
DEF NCK REAL TRAP_ANG_LINIT  ;左角
DEF NCK REAL TRAP_ANG_RINIT  ;右角
DEF NCK REAL TRAP_RND_L  ;左半圆
DEF NCK REAL TRAP_RND_R  ;右半圆
DEF NCK REAL TRAP_RND_TL  ;过渡左圆弧半径
DEF NCK REAL TRAP_RND_TR  ;过渡右圆弧半径
DEF NCK REAL TRAP_PITCH  ;齿形螺距
DEF NCK REAL TRAP_ANG_LADD  ;调整左角
DEF NCK REAL TRAP_ANG_RADD  ;调整右角
DEF NCK REAL TRAP_ANG_L  ;当前左角
DEF NCK REAL TRAP_ANG_R  ;当前右角

;双圆弧
DEF NCK REAL DARC_VER    ;齿高
DEF NCK REAL DARC_DIA_FACE    ;外圆直径
DEF NCK REAL DARC_DIA_PERFORM  ;球中心直径
DEF NCK REAL DARC_DIA_BALL  ;钢球直径
DEF NCK REAL DARC_ANG_TOUCH  ;接触角
DEF NCK REAL DARC_RND_LINIT  ;初始滚道左半径
DEF NCK REAL DARC_RND_RINIT  ;初始滚道右半径
DEF NCK REAL DARC_RND_LADD  ;调整滚道左半径
DEF NCK REAL DARC_RND_RADD  ;调整滚道右半径
DEF NCK REAL DARC_RND_L  ;当前滚道左半径
DEF NCK REAL DARC_RND_R  ;当前滚道右半径
DEF NCK REAL DARC_RND_T  ;过渡圆弧半径
DEF NCK REAL DARC_RND_LTRANS_HORI;滚道左半径水平偏心
DEF NCK REAL DARC_RND_RTRANS_HORI;滚道右半径水平偏心
DEF NCK REAL DARC_RND_LTRANS_VER;滚道左半径垂直偏心
DEF NCK REAL DARC_RND_RTRANS_VER;滚道右半径垂直偏心

;磨削参数
DEF NCK INT G_TYPE;磨削类型(0外螺纹/1内螺纹/2蜗杆/3外圆/4环形槽)
DEF NCK BOOL DRESS_STA;是否修整(0否/1是)
DEF NCK BOOL OPERA_STA;是否对刀(0否/1是)
DEF NCK INT CYCLE_MODEL;磨削循环类型

;工序
DEF NCK REAL TECH_R[10]
DEF NCK REAL TECH_MR[10]
DEF NCK REAL TECH_MF[10]
DEF NCK REAL TECH_F[10]
DEF NCK BOOL TECH_MODEL;工艺类型(0界面/1DIY)
DEF NCK INT TECH_NUM;选择工艺
DEF NCK INT TECH_NUMCURNT;当前工艺
DEF NCK BOOL TECH_DRESS_FLAG;修整标记(0不修整/1修整)
DEF NCK REAL WHEEL_POS_CURNT;当前砂轮进入工件位置
DEF NCK INT DIY_COUNTER;DIY工序计数

DEF NCK INT WORK_TH;头数
DEF NCK INT WORK_THCURNT;当前头数
DEF NCK REAL WORK_TH_ANG;平均头数角度
DEF NCK REAL WORK_TH_ANGCURNT;当前头角度

DEF NCK INT TECH_TIME_RCURNT;当前粗磨次数
DEF NCK INT TECH_TIME_MRCURNT;当前半粗磨次数
DEF NCK INT TECH_TIME_MFCURNT;当前半精磨次数
DEF NCK INT TECH_TIME_FCURNT;当前精磨次数
DEF NCK INT TECH_TIME_DIYCURNT;当前DIY次数
DEF NCK INT TECH_TIME_R;粗磨次数
DEF NCK INT TECH_TIME_MR;半粗磨次数
DEF NCK INT TECH_TIME_MF;半精磨次数
DEF NCK INT TECH_TIME_F;精磨次数
DEF NCK INT TECH_TIME_DIY;DIY次数

DEF NCK INT TECH_DRESS_CUMU_R;粗磨是否修整累计
DEF NCK INT TECH_DRESS_CUMU_MR;半粗磨是否修整累计
DEF NCK INT TECH_DRESS_CUMU_MF;半精磨是否修整累计
DEF NCK INT TECH_DRESS_CUMU_F;精磨是否修整累计
DEF NCK INT TECH_DRESS_CUMU_DIY;DIY是否修整累计
DEF NCK INT TECH_DRESS_CUMU_CURNT;当前磨削是否修整累计

DEF NCK INT TECH_DRESS_TIME_R;粗磨修整次数
DEF NCK INT TECH_DRESS_TIME_MR;半粗磨修整次数
DEF NCK INT TECH_DRESS_TIME_MF;半精磨修整次数
DEF NCK INT TECH_DRESS_TIME_F;精磨修整次数
DEF NCK INT TECH_DRESS_TIME_DIY;DIY修整次数
DEF NCK INT TECH_DRESS_TIME;当前磨削修整次数次数

DEF NCK BOOL GRIND_METHOD;单双磨削
DEF NCK BOOL GRIND_METHOD_R;粗修单双磨削
DEF NCK BOOL GRIND_METHOD_MR;半粗修单双磨削
DEF NCK BOOL GRIND_METHOD_MF;半精修单双磨削
DEF NCK BOOL GRIND_METHOD_F;精修单双磨削
DEF NCK BOOL GRIND_METHOD_DIY;DIY单双磨削

DEF NCK REAL TECH_GRIND_DEEP;磨削进给量
DEF NCK REAL TECH_GRIND_DEEP_R;粗修磨削进给量
DEF NCK REAL TECH_GRIND_DEEP_MR;半粗修磨削进给量
DEF NCK REAL TECH_GRIND_DEEP_MF;半精修磨削进给量
DEF NCK REAL TECH_GRIND_DEEP_F;精修磨削进给量
DEF NCK REAL TECH_GRIND_DEEP_DIY;DIY磨削进给量

DEF NCK REAL TECH_GRIND_FEED;磨削速度
DEF NCK REAL TECH_GRIND_FEED_R;粗修磨削速度
DEF NCK REAL TECH_GRIND_FEED_MR;半粗修磨削速度
DEF NCK REAL TECH_GRIND_FEED_MF;半精修磨削速度
DEF NCK REAL TECH_GRIND_FEED_F;精修磨削速度
DEF NCK REAL TECH_GRIND_FEED_DIY;DIY磨削速度

DEF NCK REAL TECH_DRESS_DEEP;修整进给量
DEF NCK REAL TECH_DRESS_DEEP_R;粗修修整进给量
DEF NCK REAL TECH_DRESS_DEEP_MR;半粗修修整进给量
DEF NCK REAL TECH_DRESS_DEEP_MF;半精修修整进给量
DEF NCK REAL TECH_DRESS_DEEP_F;精修修整进给量
DEF NCK REAL TECH_DRESS_DEEP_DIY;DIY修整进给量

DEF NCK REAL TECH_DRESS_FEED;修整速度
DEF NCK REAL TECH_DRESS_FEED_R;粗修整速度
DEF NCK REAL TECH_DRESS_FEED_MR;半粗修整速度
DEF NCK REAL TECH_DRESS_FEED_MF;半精修整速度
DEF NCK REAL TECH_DRESS_FEED_F;精修整速度
DEF NCK REAL TECH_DRESS_FEED_DIY;DIY整速度

DEF NCK REAL WHEEL_LINESPEED_DRESS;修整砂轮线速度
DEF NCK REAL WHEEL_LINESPEED_DRESS_D;单纯修整砂轮线速度
DEF NCK REAL WHEEL_LINESPEED_DRESS_TECH;工艺修整砂轮线速度
DEF NCK REAL WHEEL_LINESPEED_DRESS_R;修整砂轮线速度
DEF NCK REAL WHEEL_LINESPEED_DRESS_MR;修整砂轮线速度
DEF NCK REAL WHEEL_LINESPEED_DRESS_MF;修整砂轮线速度
DEF NCK REAL WHEEL_LINESPEED_DRESS_F;修整砂轮线速度
DEF NCK REAL WHEEL_LINESPEED_DRESS_DIY;DIY砂轮线速度

DEF NCK REAL WHEEL_LINESPEED_GRIND;磨削砂轮线速度
DEF NCK REAL WHEEL_LINESPEED_GRIND_R;磨削砂轮线速度
DEF NCK REAL WHEEL_LINESPEED_GRIND_MR;磨削砂轮线速度
DEF NCK REAL WHEEL_LINESPEED_GRIND_MF;磨削砂轮线速度
DEF NCK REAL WHEEL_LINESPEED_GRIND_F;磨削砂轮线速度
DEF NCK REAL WHEEL_LINESPEED_GRIND_DIY;DIY砂轮线速度

M30;

