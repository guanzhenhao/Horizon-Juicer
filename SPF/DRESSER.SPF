PROC DRESSER
;修整主程序

S_DRESS_CHOICE;修整参数赋值

IF DRESS_TIME_R+DRESS_TIME_F==0
    GOTOF D_ENDING
ENDIF

S_DRESS_START;报警及M功能

IF DRESS_ALARM==1
    GOTOF D_ENDING
ENDIF

DRESSING:
CASE DRESSWARE OF 0 GOTOF WARE_0 1 GOTOF WARE_1 2 GOTOF WARE_2 DEFAULT GOTOF WARE_3;修整器选择

WARE_0:;V-W
S_WHEL_SHAPE;修整轮选择水平位置计算
S_DRESS_SHAPE_INIT;参数初始化垂直位置计算
WHILE(DRESS_TIME_RCURNT+DRESS_TIME_FCURNT<=DRESS_TIME_R+DRESS_TIME_F)
    STOPRE
    S_LINESPEED_DRESS;砂轮速度
    S_DRESS_SHAPE;齿形选择
    S_DRESS_CHOICE;修整参数赋值
    S_DRESS_CALC;次数累积
ENDWHILE
GOTOF D_ENDING

WARE_1:;X-Z

GOTOF D_ENDING

WARE_2:;滚压
S_WARE_ROLLING;
GOTOF D_ENDING

WARE_3:;液压

GOTOF D_ENDING

D_ENDING:
S_DRESS_END
RET
